2024-10-11 22:55:06,710 - INFO - 数据库连接池创建成功
2024-10-11 22:55:06,737 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8080
 * Running on http://192.168.57.88:8080
2024-10-11 22:55:06,737 - INFO - [33mPress CTRL+C to quit[0m
2024-10-11 22:55:12,929 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:12,929 - INFO - 执行查询: 
            SELECT aid, title, image_url FROM yesapi_bjy_article
            WHERE aid < %s AND is_show=1 AND is_delete=0
            ORDER BY aid DESC LIMIT 1
        , 参数: (44,)
2024-10-11 22:55:12,930 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:12,930 - INFO - 执行查询: SELECT * FROM yesapi_bjy_article WHERE aid=%s AND is_show=1 AND is_delete=0, 参数: (44,)
2024-10-11 22:55:12,931 - INFO - 查询结果: {'aid': 25, 'title': '人工智能在医学中的应用', 'image_url': 'http://localhost:8080/static/picture/architect-1.png'}
2024-10-11 22:55:12,931 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:12,931 - INFO - 执行命令: UPDATE yesapi_bjy_article SET click = click + 1 WHERE aid=%s, 参数: (44,)
2024-10-11 22:55:12,931 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:12,933 - INFO - 执行查询: 
        SELECT aid, title, image_url, update_time, cid 
        FROM yesapi_bjy_article 
        WHERE is_show=1 AND is_delete=0 
        ORDER BY update_time DESC 
        LIMIT 3
    , 参数: None
2024-10-11 22:55:12,933 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:12,933 - INFO - 执行查询: 
        SELECT c.cid, c.category_name, COUNT(a.aid) as article_count
        FROM yesapi_bjy_article_category c
        LEFT JOIN yesapi_bjy_article a ON c.cid = a.cid AND a.is_show = 1 AND a.is_delete = 0
        GROUP BY c.cid, c.category_name
    , 参数: None
2024-10-11 22:55:12,934 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:12,934 - INFO - 查询结果: {'id': 16, 'aid': 44, 'title': '修改测试', 'author': '作者乙', 'content': '<p><i><strong>文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，</strong></i></p><p><i><strong>许多领域都在进行积极的转型 然而，这些措施的效果还远远不够，</strong></i></p><p><i><strong>我们需要更加积极的全球合作 环境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在经济中的重要性 企业应该将环境保护作为其核心</strong></i></p><p><i><strong>战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，许多领域都在进行积极的转型 然而，这些措施的效果还远远不够，我们需要更加积极的全球合作 环境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在</strong></i></p><p><i><strong>经济中的重要性 企业应该将环境保护作为其核心战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，许多领域都在进行积极的转型 然而</strong></i></p><p><i><strong>，这些措施的效果还远远不够，我们需要更加积极的全球合作 环境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在经济中的重要性 企业应该将环境保护作为其核心战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，许多领域都在进行积极的转型 然而，这些措施的效果还远远不够，我们需要更加积极的全球合作 环</strong></i></p><p><i><strong>境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在经济中的重要性 企业应该将环境保护作为其核心战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 </strong></i><a href="www.baidu.com"><i><strong>www.baidu.com</strong></i></a></p>', 'keywords': '环境保护, 可持续发展, 经济', 'description': '关于环境保护和可持续发展的深入探讨。', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 66, 'addtime': 1617181724, 'cid': 2, 'image_url': 'http://localhost:8080/static/image\\c8e8ac5a-175e-43f8-8199-8360f07c7a04.jpg', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 22, 51, 49), 'auth_id': 33}
2024-10-11 22:55:12,934 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:12,934 - INFO - 执行查询: SELECT id, attachment_url, attachment_name, size FROM article_attachments WHERE aid=%s, 参数: (44,)
2024-10-11 22:55:12,936 - INFO - 查询结果: [{'id': 12, 'attachment_url': 'http://localhost:8080/static/attachments\\19788559-1be1-4a3f-99b0-3a815c9a9ac3.jpg', 'attachment_name': 'auth.jpg', 'size': 39392}, {'id': 13, 'attachment_url': 'http://localhost:8080/static/attachments\\570a1bb0-9ee7-4875-a420-060654721508.jpg', 'attachment_name': 'like.jpg', 'size': 5351}, {'id': 14, 'attachment_url': 'http://localhost:8080/static/attachments\\79256a3e-8683-440a-b98b-5048244f2441.zip', 'attachment_name': '在线学习平台的设计与实现代码.zip', 'size': 227936}, {'id': 15, 'attachment_url': 'http://localhost:8080/static/attachments\\2dfe8f4e-ed45-463b-9b5a-60c504f3aa6a.doc', 'attachment_name': '附件3：2024届毕业生毕业设计（论文）.doc', 'size': 353792}]
2024-10-11 22:55:12,936 - INFO - 查询结果: [{'aid': 1473524313, 'title': '文章NM', 'image_url': 'http://localhost:8080/static/image\\dcd80204-43f0-4256-971c-504cca08ec4b.jpg', 'update_time': datetime.datetime(2024, 10, 11, 22, 51, 50), 'cid': 9}, {'aid': 44, 'title': '修改测试', 'image_url': 'http://localhost:8080/static/image\\c8e8ac5a-175e-43f8-8199-8360f07c7a04.jpg', 'update_time': datetime.datetime(2024, 10, 11, 22, 51, 49), 'cid': 2}, {'aid': 556243936, 'title': '测试添加文章', 'image_url': '', 'update_time': datetime.datetime(2024, 10, 11, 22, 48, 46), 'cid': 5}]
2024-10-11 22:55:12,936 - INFO - 执行成功，影响行数: 1
2024-10-11 22:55:12,937 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:12,937 - INFO - 查询结果: [{'cid': 1, 'category_name': '生活方式', 'article_count': 10}, {'cid': 2, 'category_name': '商业', 'article_count': 2}, {'cid': 3, 'category_name': '运动', 'article_count': 0}, {'cid': 4, 'category_name': '教育', 'article_count': 0}, {'cid': 5, 'category_name': '科学', 'article_count': 3}, {'cid': 6, 'category_name': '游泳', 'article_count': 0}, {'cid': 7, 'category_name': '赛车', 'article_count': 0}, {'cid': 8, 'category_name': '旅游', 'article_count': 0}, {'cid': 9, 'category_name': '美食', 'article_count': 1}, {'cid': 10, 'category_name': '时尚', 'article_count': 0}]
2024-10-11 22:55:12,937 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:12,937 - INFO - 执行查询: 
            SELECT aid, title, image_url FROM yesapi_bjy_article
            WHERE aid > %s AND is_show=1 AND is_delete=0
            ORDER BY aid LIMIT 1
        , 参数: (44,)
2024-10-11 22:55:12,937 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:12,938 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:12] "GET /article/article_id/44 HTTP/1.1" 200 -
2024-10-11 22:55:12,938 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:12,938 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:12,939 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:12] "GET /article/get_attachments/44 HTTP/1.1" 200 -
2024-10-11 22:55:12,939 - INFO - 查询结果: {'aid': 45, 'title': '量子计算——未来科技的颠覆者', 'image_url': 'http://localhost:8080/static/picture/architect-2.png'}
2024-10-11 22:55:12,940 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:12] "GET /article/get_recent_articles HTTP/1.1" 200 -
2024-10-11 22:55:12,940 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:12] "POST /article/update_click/44 HTTP/1.1" 200 -
2024-10-11 22:55:12,940 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:12,941 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:12,944 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:12] "GET /article/categories_with_count HTTP/1.1" 200 -
2024-10-11 22:55:12,945 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:12] "GET /article/get_prev_next/44 HTTP/1.1" 200 -
2024-10-11 22:55:13,258 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "OPTIONS /user/user_info/33 HTTP/1.1" 200 -
2024-10-11 22:55:13,259 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:13,262 - INFO - 执行查询: SELECT COUNT(*) as count FROM comments WHERE article_id=%s, 参数: (44,)
2024-10-11 22:55:13,262 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:13,263 - INFO - 执行查询: SELECT c.*, u.user_icon_url, u.username ,u.role FROM comments c LEFT JOIN users u ON c.user_id=u.id WHERE article_id=%s ORDER BY c.like_count DESC, 参数: (44,)
2024-10-11 22:55:13,263 - INFO - 查询结果: {'count': 2}
2024-10-11 22:55:13,263 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:13,265 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "GET /comments/count/44 HTTP/1.1" 200 -
2024-10-11 22:55:13,266 - INFO - 查询结果: [{'id': 37, 'article_id': 44, 'user_id': 33, 'content': '傻狗', 'parent_comment_id': None, 'created_at': datetime.datetime(2024, 10, 11, 19, 54, 38), 'updated_at': datetime.datetime(2024, 10, 11, 19, 54, 48), 'like_count': 11, 'user_icon_url': 'http://localhost:8080/static/user_icons\\8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg', 'username': '吴子依小狗狗', 'role': 'author'}, {'id': 38, 'article_id': 44, 'user_id': 33, 'content': '人机', 'parent_comment_id': None, 'created_at': datetime.datetime(2024, 10, 11, 19, 54, 44), 'updated_at': datetime.datetime(2024, 10, 11, 19, 54, 44), 'like_count': 0, 'user_icon_url': 'http://localhost:8080/static/user_icons\\8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg', 'username': '吴子依小狗狗', 'role': 'author'}]
2024-10-11 22:55:13,266 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:13,268 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "GET /comments/44 HTTP/1.1" 200 -
2024-10-11 22:55:13,567 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:13,567 - INFO - 执行查询: SELECT username, phone, role, created_at, user_icon_url FROM users WHERE id = %s, 参数: (33,)
2024-10-11 22:55:13,568 - INFO - 查询结果: {'username': '吴子依小狗狗', 'phone': '18888888888', 'role': 'author', 'created_at': datetime.datetime(2024, 9, 29, 13, 16, 43), 'user_icon_url': 'http://localhost:8080/static/user_icons\\8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg'}
2024-10-11 22:55:13,569 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:13,570 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "GET /user/user_info/33 HTTP/1.1" 200 -
2024-10-11 22:55:13,598 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:13,599 - INFO - 执行查询: SELECT auth_id FROM yesapi_bjy_article WHERE aid=%s, 参数: (44,)
2024-10-11 22:55:13,599 - INFO - 查询结果: {'auth_id': 33}
2024-10-11 22:55:13,600 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:13,600 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "GET /article/get_author_id/44 HTTP/1.1" 200 -
2024-10-11 22:55:13,741 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "[36mGET /static/image/c8e8ac5a-175e-43f8-8199-8360f07c7a04.jpg HTTP/1.1[0m" 304 -
2024-10-11 22:55:13,742 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "[36mGET /static/image/dcd80204-43f0-4256-971c-504cca08ec4b.jpg HTTP/1.1[0m" 304 -
2024-10-11 22:55:13,753 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "[36mGET /static/picture/architect-1.png HTTP/1.1[0m" 304 -
2024-10-11 22:55:13,830 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "[36mGET /static/picture/architect-2.png HTTP/1.1[0m" 304 -
2024-10-11 22:55:13,916 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:13,917 - INFO - 执行查询: SELECT auth_id FROM yesapi_bjy_article WHERE aid=%s, 参数: (44,)
2024-10-11 22:55:13,917 - INFO - 查询结果: {'auth_id': 33}
2024-10-11 22:55:13,918 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:13,919 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:13] "GET /article/get_author_id/44 HTTP/1.1" 200 -
2024-10-11 22:55:14,051 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "[36mGET /static/user_icons/8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg HTTP/1.1[0m" 304 -
2024-10-11 22:55:14,175 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "OPTIONS /user/check_permissions/33 HTTP/1.1" 200 -
2024-10-11 22:55:14,333 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,333 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,333 - INFO - 执行查询: SELECT cid, category_name FROM yesapi_bjy_article_category, 参数: None
2024-10-11 22:55:14,335 - INFO - 执行查询: SELECT username, phone, role, created_at, user_icon_url FROM users WHERE id = %s, 参数: (33,)
2024-10-11 22:55:14,335 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,335 - INFO - 执行查询: SELECT role FROM users WHERE id = %s, 参数: (33,)
2024-10-11 22:55:14,336 - INFO - 查询结果: [{'cid': 2, 'category_name': '商业'}, {'cid': 4, 'category_name': '教育'}, {'cid': 8, 'category_name': '旅游'}, {'cid': 10, 'category_name': '时尚'}, {'cid': 6, 'category_name': '游泳'}, {'cid': 1, 'category_name': '生活方式'}, {'cid': 5, 'category_name': '科学'}, {'cid': 9, 'category_name': '美食'}, {'cid': 7, 'category_name': '赛车'}, {'cid': 3, 'category_name': '运动'}]
2024-10-11 22:55:14,336 - INFO - 查询结果: {'username': '吴子依小狗狗', 'phone': '18888888888', 'role': 'author', 'created_at': datetime.datetime(2024, 9, 29, 13, 16, 43), 'user_icon_url': 'http://localhost:8080/static/user_icons\\8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg'}
2024-10-11 22:55:14,337 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,337 - INFO - 查询结果: {'role': 'author'}
2024-10-11 22:55:14,337 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /article/category_id HTTP/1.1" 200 -
2024-10-11 22:55:14,337 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,338 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,339 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /user/user_info/33 HTTP/1.1" 200 -
2024-10-11 22:55:14,340 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /user/check_permissions/33 HTTP/1.1" 200 -
2024-10-11 22:55:14,350 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "[36mGET /static/user_icons/8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg HTTP/1.1[0m" 304 -
2024-10-11 22:55:14,487 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "OPTIONS /user/get_author_articles/33 HTTP/1.1" 200 -
2024-10-11 22:55:14,658 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,658 - INFO - 执行查询: 
    SELECT 
    a.aid, 
    a.title, 
    a.author, 
    a.content, 
    a.keywords, 
    a.description, 
    a.is_show, 
    a.is_delete, 
    a.is_top, 
    a.is_original, 
    a.click, 
    a.addtime, 
    a.cid, 
    a.image_url, 
    a.comment_count, 
    a.update_time, 
    a.auth_id, 
    c.category_name 
FROM 
    users u 
JOIN 
    yesapi_bjy_article a ON u.id = a.auth_id 
JOIN 
    yesapi_bjy_article_category c ON a.cid = c.cid 
WHERE 
        u.id = %s AND
        a.is_show = 1 AND 
        a.is_delete = 0
    , 参数: (33,)
2024-10-11 22:55:14,659 - INFO - 查询结果: [{'aid': 8504, 'title': '测试修改文章', 'author': '邹云', 'content': '测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章', 'keywords': '测试，修改，文章', 'description': '测试修改文章', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 110, 'addtime': 1726728030, 'cid': 1, 'image_url': 'http://localhost:8080/static/image\\ea49b748-be8e-4eb7-adc3-7753e3e83529.jpg', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 19, 53, 16), 'auth_id': 33, 'category_name': '生活方式'}, {'aid': 44, 'title': '修改测试', 'author': '作者乙', 'content': '<p><i><strong>文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，</strong></i></p><p><i><strong>许多领域都在进行积极的转型 然而，这些措施的效果还远远不够，</strong></i></p><p><i><strong>我们需要更加积极的全球合作 环境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在经济中的重要性 企业应该将环境保护作为其核心</strong></i></p><p><i><strong>战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，许多领域都在进行积极的转型 然而，这些措施的效果还远远不够，我们需要更加积极的全球合作 环境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在</strong></i></p><p><i><strong>经济中的重要性 企业应该将环境保护作为其核心战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，许多领域都在进行积极的转型 然而</strong></i></p><p><i><strong>，这些措施的效果还远远不够，我们需要更加积极的全球合作 环境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在经济中的重要性 企业应该将环境保护作为其核心战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 文章二的内容主要讨论了环境保护和可持续发展的重要性 近年来，全球气候变化问题变得日益严重，各国都在采取措施来应对这一挑战 从减少碳排放到推动清洁能源的发展，许多领域都在进行积极的转型 然而，这些措施的效果还远远不够，我们需要更加积极的全球合作 环</strong></i></p><p><i><strong>境问题不仅仅是一个国家的问题，它是全球性的挑战 每个人都应该意识到，个人的行为对环境有直接影响 比如，减少塑料使用、选择环保交通工具、支持可持续发展的产品和服务等 这篇文章还探讨了可持续发展在经济中的重要性 企业应该将环境保护作为其核心战略的一部分，不仅因为这对环境有益，还因为这有助于长期的商业成功 在未来的几十年里，我们将看到更多关于绿色技术和环保政策的讨论和实施 </strong></i><a href="www.baidu.com"><i><strong>www.baidu.com</strong></i></a></p>', 'keywords': '环境保护, 可持续发展, 经济', 'description': '关于环境保护和可持续发展的深入探讨。', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 67, 'addtime': 1617181724, 'cid': 2, 'image_url': 'http://localhost:8080/static/image\\c8e8ac5a-175e-43f8-8199-8360f07c7a04.jpg', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 22, 55, 12), 'auth_id': 33, 'category_name': '商业'}, {'aid': 25, 'title': '人工智能在医学中的应用', 'author': '张三', 'content': '近年来，人工智能（AI）技术在各个领域的发展可谓迅猛，尤其是在医学领域的应用取得了显著进展\n 人工智能技术通过大数据分析、深度学习等方法，能够帮助医生在疾病诊断、治疗方案选择以及药物研发等方面实现突破性进展\n 本文将探讨人工智能在医学领域中的主要应用及其未来发展前景\n  \r     首先，人工智能在医学图像分析中的应用已经取得了显著成果\n 传统的医学影像分析主要依赖于医生的经验，但人工智能技术可以通过学习海量的医学影像数据来提高诊断的准确性和效率\n 例如，AI已经被广泛应用于对X射线、CT扫描、MRI等医学影像的自动化分析，特别是在肿瘤、心脏疾病等复杂病症的早期筛查中\n AI通过模式识别技术，能够识别出肉眼难以察觉的病变，从而帮助医生更早期、更精确地做出诊断\n  \r     其次，人工智能在个性化医疗中的作用也越来越显著\n 个性化医疗指的是根据患者的基因、环境、生活习惯等个体化信息，制定最适合的治疗方案\n 通过对海量基因组数据的分析，人工智能可以帮助找到与某些疾病相关的基因变异，从而为药物研发提供参考\n 与此同时，AI可以根据患者的病史、生活习惯等因素，生成个性化的治疗方案，确保治疗效果的最大化\n  \r     药物研发是另一个AI发挥巨大潜力的领域\n 传统的药物研发周期长、成本高，通常需要耗费数十年时间和数十亿美元的投入\n 而AI通过模拟化学分子结构、预测药物与人体的相互作用，可以大幅度缩短新药开发的时间\n 例如，AI可以通过深度学习算法，从大量的分子结构数据中找到潜在的药物分子，筛选出最有可能的候选药物，大幅降低实验和临床试验的时间成本\n  \r     尽管人工智能在医学中的应用取得了重大进展，但也面临一些挑战\n 首先，AI的决策过程是一个“黑箱”，即虽然我们可以看到结果，但难以理解其如何得出结论\n 在医学领域，透明性尤为重要，因为每一个诊断结果或治疗方案都关系到患者的生命健康\n 因此，未来需要进一步开发可解释的人工智能模型，确保医生和患者能够理解并信任AI的建议\n  \r     此外，隐私问题也是AI在医学应用中的一大挑战\n 医疗数据往往包含患者的个人敏感信息，在AI的开发和应用过程中，如何保护这些数据的安全性至关重要\n 为此，医学AI系统必须遵循严格的隐私保护政策，并采取先进的加密技术，防止数据泄露\n  \r     总的来说，人工智能在医学领域的应用潜力巨大，能够帮助医生提高诊断效率，制定个性化治疗方案，并加速药物研发\n 然而，AI在医学领域的推广仍需解决技术透明性和数据隐私等问题\n 未来，随着技术的不断成熟，人工智能有望成为医生的重要助手，为患者带来更高质量的医疗服务\n ', 'keywords': '科技, AI, 医学', 'description': '关于AI技术在医学方面的应用。', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 1092, 'addtime': 1617181723, 'cid': 5, 'image_url': 'http://localhost:8080/static/picture/architect-1.png', 'comment_count': 10, 'update_time': datetime.datetime(2024, 10, 11, 19, 45, 25), 'auth_id': 33, 'category_name': '科学'}, {'aid': 45, 'title': '量子计算——未来科技的颠覆者', 'author': 'ChatGpt', 'content': '量子计算是近年来科学技术界最受关注的前沿领域之一，它被认为将彻底改变传统计算的方式，并对多个行业产生深远影响\n 不同于经典计算机依赖的比特（0和1），量子计算基于量子比特（qubit），它可以同时处于0和1的叠加态\n 这一特性使得量子计算能够在处理某些复杂问题时，比传统计算机快上千倍甚至亿倍\n 本文将探讨量子计算的基本原理、应用领域以及面临的挑战\n  \r     首先，量子计算的核心在于量子力学的两大基本原理：叠加和纠缠\n 叠加态意味着一个量子比特可以同时表示0和1，从而使得量子计算机能够同时处理大量的计算任务\n 相比之下，经典计算机在同一时间内只能处理一项任务\n 而纠缠态则使得两个或多个量子比特之间的状态紧密关联，即使它们相隔甚远，也能够瞬间相互影响\n 通过利用这些特性，量子计算机能够在解决复杂问题时显著提升运算效率\n  \r     量子计算的应用前景广阔，涵盖了多个领域\n 首先，在密码学领域，量子计算被认为能够打破当前的加密标准\n 传统的加密算法，如RSA，依赖于因数分解等数学难题的复杂性，而量子计算通过Shor算法能够在极短时间内完成因数分解，从而破解现有的加密系统\n 因此，未来量子计算的发展将促使人类寻找新的、更为安全的加密方式\n  \r     其次，量子计算在材料科学和药物研发中具有巨大潜力\n 模拟和预测分子结构是材料科学和化学领域中的重要任务，传统计算机由于运算能力的限制，难以对复杂分子进行精确的模拟\n 而量子计算可以通过模拟量子系统的行为，帮助科学家更快地找到新材料或新药物\n 例如，量子计算已经被用于模拟某些分子的电子结构，从而加速了新药的发现过程\n  \r     此外，量子计算在人工智能和机器学习中的应用前景也备受关注\n 传统的机器学习算法依赖于大量的数据和复杂的计算过程，而量子计算的高效运算能力将显著提高机器学习的训练速度\n 一些研究者已经开始探索量子计算与人工智能的结合，尝试开发量子神经网络等新型算法，期望在未来实现更为智能和高效的AI系统\n  \r     然而，量子计算的实际应用仍面临诸多挑战\n 首先是量子比特的稳定性问题\n 由于量子比特极易受到外界干扰，导致量子信息的丢失，这一问题被称为“量子退相干”\n 为了使量子计算机正常运行，科学家们正在研究如何延长量子比特的寿命，并开发有效的纠错机制\n 其次，量子计算的硬件制造和维护成本极高，目前全球仅有少数科研机构和科技公司能够研发原型机，距离大规模商用仍有较长的路要走\n  \r     尽管面临挑战，量子计算的潜力不可忽视\n 它有望在未来的几十年内颠覆多个行业，包括金融、物流、化学、能源等，为人类社会带来全新的科技革命\n 随着科学技术的不断进步，量子计算将逐渐从实验室走向现实应用，成为未来科技的重要组成部分\n ', 'keywords': '科技, 量子计算, 未来', 'description': '关于量子计算及其在未来科技中的潜力。', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 660, 'addtime': 1617181724, 'cid': 5, 'image_url': 'http://localhost:8080/static/picture/architect-2.png', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 21, 39, 37), 'auth_id': 33, 'category_name': '科学'}, {'aid': 556243936, 'title': '测试添加文章', 'author': '吴子依小狗狗', 'content': '<p><i><strong>@article_blueprint.route(\'/add_article\', methods=[\'POST\'])</strong></i><br><i><strong>@token_required</strong></i><br><i><strong>def add_article(current_user_id):</strong></i><br><i><strong>&nbsp; &nbsp;try:</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;# 获取表单数据</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;title = request.form.get(\'title\')</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;category_id = request.form.get(\'category_id\') &nbsp;# 获取分类ID</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;keywords = request.form.get(\'keywords\')</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;description = request.form.get(\'description\')</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;content = request.form.get(\'content\')</strong></i></p><p><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;# 验证必要字段是否存在</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;if not all([title, category_id, keywords, content]):</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": "缺少必要的字段"}), 400</strong></i></p><p><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;# 保存文章到数据库</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;insert_article_query = \'\'\'</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INSERT INTO yesapi_bjy_article (title, cid, keywords, description, content, addtime, author, auth_id)&nbsp;</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VALUES (%s, %s, %s, %s, %s, %s, %s, %s)</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;\'\'\'</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;addtime = int(time.time()) &nbsp;# 获取当前Unix时间戳</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;params = (title, category_id, keywords, description, content, addtime, current_user.username, current_user.id)</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;article_id = mysql_pool.execute(insert_article_query, params)</strong></i></p><p><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;# 返回成功响应</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"result": "文章发布成功", "article_id": article_id}), 200</strong></i></p><p><i><strong>&nbsp; &nbsp;except Exception as e:</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;print(f"发布文章失败，错误信息：{str(e)}")</strong></i><br><i><strong>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"发布文章失败: {str(e)}"}), 500</strong></i><br>&nbsp;</p>', 'keywords': '测试，添加，文章', 'description': '描述', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 4, 'addtime': 1728657820, 'cid': 5, 'image_url': '', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 22, 48, 46), 'auth_id': 33, 'category_name': '科学'}, {'aid': 1473524313, 'title': '文章NM', 'author': '吴子依小狗狗', 'content': '<p>@article_blueprint.route(\'/add_article\', methods=[\'POST\'])<br>@token_required<br>def add_article(current_user_id):<br>&nbsp; &nbsp;"""<br>&nbsp; &nbsp;添加文章，包括文章内容、标签、描述、图片以及附件的处理。<br>&nbsp; &nbsp;"""<br>&nbsp; &nbsp;try:<br>&nbsp; &nbsp; &nbsp; &nbsp;# 根据用户ID查询用户信息<br>&nbsp; &nbsp; &nbsp; &nbsp;query_user = "SELECT username FROM users WHERE id = %s"<br>&nbsp; &nbsp; &nbsp; &nbsp;user_result = mysql_pool.fetch(query_user, (current_user_id,))</p><p>&nbsp; &nbsp; &nbsp; &nbsp;if not user_result:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": "用户不存在"}), 404</p><p>&nbsp; &nbsp; &nbsp; &nbsp;current_user_username = user_result[0][\'username\'] &nbsp;# 获取用户名</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 获取表单数据<br>&nbsp; &nbsp; &nbsp; &nbsp;title = request.form.get(\'title\')<br>&nbsp; &nbsp; &nbsp; &nbsp;keywords = request.form.get(\'keywords\')<br>&nbsp; &nbsp; &nbsp; &nbsp;description = request.form.get(\'description\')<br>&nbsp; &nbsp; &nbsp; &nbsp;content = request.form.get(\'content\')<br>&nbsp; &nbsp; &nbsp; &nbsp;category_id = request.form.get(\'category_id\') &nbsp;# 获取分类ID</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 验证必要字段是否存在<br>&nbsp; &nbsp; &nbsp; &nbsp;if not all([title, keywords, content]):<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": "缺少必要的字段"}), 400</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 生成一个长度不超过10的唯一aid<br>&nbsp; &nbsp; &nbsp; &nbsp;aid = generate_numeric_uuid()</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 保存文章封面图片<br>&nbsp; &nbsp; &nbsp; &nbsp;cover_image = request.files.get(\'coverImage\')<br>&nbsp; &nbsp; &nbsp; &nbsp;cover_image_url = None<br>&nbsp; &nbsp; &nbsp; &nbsp;if cover_image:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cover_image_path, error = save_file(cover_image, app.config[\'UPLOAD_FOLDER\'])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if error:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"封面图片上传失败: {error}"}), 400<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cover_image_url = f"http://localhost:8080/{cover_image_path}"</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 保存文章到数据库<br>&nbsp; &nbsp; &nbsp; &nbsp;insert_article_query = \'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INSERT INTO yesapi_bjy_article (aid, title, keywords, description, content, addtime, author, auth_id, cid, image_url)&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)<br>&nbsp; &nbsp; &nbsp; &nbsp;\'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp;addtime = int(time.time()) &nbsp;# 获取当前Unix时间戳<br>&nbsp; &nbsp; &nbsp; &nbsp;params = (aid, title, keywords, description, content, addtime, current_user_username, current_user_id, category_id, cover_image_url)<br>&nbsp; &nbsp; &nbsp; &nbsp;mysql_pool.execute(insert_article_query, params)</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 处理上传的附件文件<br>&nbsp; &nbsp; &nbsp; &nbsp;attachments = request.files.getlist(\'attachments[]\')<br>&nbsp; &nbsp; &nbsp; &nbsp;for attachment in attachments:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if attachment:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;attachment_path, error = save_file(attachment, app.config[\'UPLOAD_FOLDER\'])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if error:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"附件上传失败: {error}"}), 400</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 保存附件信息到数据库<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;insert_attachment_query = \'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INSERT INTO article_attachments (aid, attachment_url, attachment_name, size)&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VALUES (%s, %s, %s, %s)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;attachment_url = f"http://localhost:8080/{attachment_path}"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;params = (aid, attachment_url, attachment.filename, attachment.content_length)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mysql_pool.execute(insert_attachment_query, params)</p><p>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"result": "文章发布成功", "article_id": aid}), 200</p><p>&nbsp; &nbsp;except Exception as e:<br>&nbsp; &nbsp; &nbsp; &nbsp;print(f"发布文章失败，错误信息：{str(e)}")<br>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"发布文章失败: {str(e)}"}), 500<br>&nbsp;</p>', 'keywords': '测试，修改，文章', 'description': '非常好', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 2, 'addtime': 1728658174, 'cid': 9, 'image_url': 'http://localhost:8080/static/image\\dcd80204-43f0-4256-971c-504cca08ec4b.jpg', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 22, 51, 50), 'auth_id': 33, 'category_name': '美食'}]
2024-10-11 22:55:14,660 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,660 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /user/get_author_articles/33 HTTP/1.1" 200 -
2024-10-11 22:55:14,797 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,798 - INFO - 执行查询: 
            SELECT aid, title, image_url FROM yesapi_bjy_article
            WHERE aid < %s AND is_show=1 AND is_delete=0
            ORDER BY aid DESC LIMIT 1
        , 参数: (1473524313,)
2024-10-11 22:55:14,798 - INFO - 查询结果: {'aid': 1179909336, 'title': '测试发布新文章', 'image_url': ''}
2024-10-11 22:55:14,799 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,799 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,799 - INFO - 执行查询: 
            SELECT aid, title, image_url FROM yesapi_bjy_article
            WHERE aid > %s AND is_show=1 AND is_delete=0
            ORDER BY aid LIMIT 1
        , 参数: (1473524313,)
2024-10-11 22:55:14,800 - INFO - 查询结果: {'aid': 1871261861, 'title': '测试添加文章', 'image_url': ''}
2024-10-11 22:55:14,800 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,800 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /article/get_prev_next/1473524313 HTTP/1.1" 200 -
2024-10-11 22:55:14,860 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,860 - INFO - 执行查询: SELECT * FROM yesapi_bjy_article WHERE aid=%s AND is_show=1 AND is_delete=0, 参数: (1473524313,)
2024-10-11 22:55:14,863 - INFO - 查询结果: {'id': 22, 'aid': 1473524313, 'title': '文章NM', 'author': '吴子依小狗狗', 'content': '<p>@article_blueprint.route(\'/add_article\', methods=[\'POST\'])<br>@token_required<br>def add_article(current_user_id):<br>&nbsp; &nbsp;"""<br>&nbsp; &nbsp;添加文章，包括文章内容、标签、描述、图片以及附件的处理。<br>&nbsp; &nbsp;"""<br>&nbsp; &nbsp;try:<br>&nbsp; &nbsp; &nbsp; &nbsp;# 根据用户ID查询用户信息<br>&nbsp; &nbsp; &nbsp; &nbsp;query_user = "SELECT username FROM users WHERE id = %s"<br>&nbsp; &nbsp; &nbsp; &nbsp;user_result = mysql_pool.fetch(query_user, (current_user_id,))</p><p>&nbsp; &nbsp; &nbsp; &nbsp;if not user_result:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": "用户不存在"}), 404</p><p>&nbsp; &nbsp; &nbsp; &nbsp;current_user_username = user_result[0][\'username\'] &nbsp;# 获取用户名</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 获取表单数据<br>&nbsp; &nbsp; &nbsp; &nbsp;title = request.form.get(\'title\')<br>&nbsp; &nbsp; &nbsp; &nbsp;keywords = request.form.get(\'keywords\')<br>&nbsp; &nbsp; &nbsp; &nbsp;description = request.form.get(\'description\')<br>&nbsp; &nbsp; &nbsp; &nbsp;content = request.form.get(\'content\')<br>&nbsp; &nbsp; &nbsp; &nbsp;category_id = request.form.get(\'category_id\') &nbsp;# 获取分类ID</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 验证必要字段是否存在<br>&nbsp; &nbsp; &nbsp; &nbsp;if not all([title, keywords, content]):<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": "缺少必要的字段"}), 400</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 生成一个长度不超过10的唯一aid<br>&nbsp; &nbsp; &nbsp; &nbsp;aid = generate_numeric_uuid()</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 保存文章封面图片<br>&nbsp; &nbsp; &nbsp; &nbsp;cover_image = request.files.get(\'coverImage\')<br>&nbsp; &nbsp; &nbsp; &nbsp;cover_image_url = None<br>&nbsp; &nbsp; &nbsp; &nbsp;if cover_image:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cover_image_path, error = save_file(cover_image, app.config[\'UPLOAD_FOLDER\'])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if error:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"封面图片上传失败: {error}"}), 400<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cover_image_url = f"http://localhost:8080/{cover_image_path}"</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 保存文章到数据库<br>&nbsp; &nbsp; &nbsp; &nbsp;insert_article_query = \'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INSERT INTO yesapi_bjy_article (aid, title, keywords, description, content, addtime, author, auth_id, cid, image_url)&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)<br>&nbsp; &nbsp; &nbsp; &nbsp;\'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp;addtime = int(time.time()) &nbsp;# 获取当前Unix时间戳<br>&nbsp; &nbsp; &nbsp; &nbsp;params = (aid, title, keywords, description, content, addtime, current_user_username, current_user_id, category_id, cover_image_url)<br>&nbsp; &nbsp; &nbsp; &nbsp;mysql_pool.execute(insert_article_query, params)</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 处理上传的附件文件<br>&nbsp; &nbsp; &nbsp; &nbsp;attachments = request.files.getlist(\'attachments[]\')<br>&nbsp; &nbsp; &nbsp; &nbsp;for attachment in attachments:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if attachment:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;attachment_path, error = save_file(attachment, app.config[\'UPLOAD_FOLDER\'])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if error:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"附件上传失败: {error}"}), 400</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 保存附件信息到数据库<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;insert_attachment_query = \'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INSERT INTO article_attachments (aid, attachment_url, attachment_name, size)&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VALUES (%s, %s, %s, %s)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;attachment_url = f"http://localhost:8080/{attachment_path}"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;params = (aid, attachment_url, attachment.filename, attachment.content_length)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mysql_pool.execute(insert_attachment_query, params)</p><p>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"result": "文章发布成功", "article_id": aid}), 200</p><p>&nbsp; &nbsp;except Exception as e:<br>&nbsp; &nbsp; &nbsp; &nbsp;print(f"发布文章失败，错误信息：{str(e)}")<br>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"发布文章失败: {str(e)}"}), 500<br>&nbsp;</p>', 'keywords': '测试，修改，文章', 'description': '非常好', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 2, 'addtime': 1728658174, 'cid': 9, 'image_url': 'http://localhost:8080/static/image\\dcd80204-43f0-4256-971c-504cca08ec4b.jpg', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 22, 51, 50), 'auth_id': 33}
2024-10-11 22:55:14,863 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,865 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,865 - INFO - 执行命令: UPDATE yesapi_bjy_article SET click = click + 1 WHERE aid=%s, 参数: (1473524313,)
2024-10-11 22:55:14,865 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,865 - INFO - 执行查询: 
        SELECT c.cid, c.category_name, COUNT(a.aid) as article_count
        FROM yesapi_bjy_article_category c
        LEFT JOIN yesapi_bjy_article a ON c.cid = a.cid AND a.is_show = 1 AND a.is_delete = 0
        GROUP BY c.cid, c.category_name
    , 参数: None
2024-10-11 22:55:14,866 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /article/article_id/1473524313 HTTP/1.1" 200 -
2024-10-11 22:55:14,868 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,868 - INFO - 执行查询: 
        SELECT aid, title, image_url, update_time, cid 
        FROM yesapi_bjy_article 
        WHERE is_show=1 AND is_delete=0 
        ORDER BY update_time DESC 
        LIMIT 3
    , 参数: None
2024-10-11 22:55:14,870 - INFO - 执行成功，影响行数: 1
2024-10-11 22:55:14,871 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,872 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "POST /article/update_click/1473524313 HTTP/1.1" 200 -
2024-10-11 22:55:14,873 - INFO - 查询结果: [{'aid': 1473524313, 'title': '文章NM', 'image_url': 'http://localhost:8080/static/image\\dcd80204-43f0-4256-971c-504cca08ec4b.jpg', 'update_time': datetime.datetime(2024, 10, 11, 22, 55, 14), 'cid': 9}, {'aid': 44, 'title': '修改测试', 'image_url': 'http://localhost:8080/static/image\\c8e8ac5a-175e-43f8-8199-8360f07c7a04.jpg', 'update_time': datetime.datetime(2024, 10, 11, 22, 55, 12), 'cid': 2}, {'aid': 556243936, 'title': '测试添加文章', 'image_url': '', 'update_time': datetime.datetime(2024, 10, 11, 22, 48, 46), 'cid': 5}]
2024-10-11 22:55:14,873 - INFO - 查询结果: [{'cid': 1, 'category_name': '生活方式', 'article_count': 10}, {'cid': 2, 'category_name': '商业', 'article_count': 2}, {'cid': 3, 'category_name': '运动', 'article_count': 0}, {'cid': 4, 'category_name': '教育', 'article_count': 0}, {'cid': 5, 'category_name': '科学', 'article_count': 3}, {'cid': 6, 'category_name': '游泳', 'article_count': 0}, {'cid': 7, 'category_name': '赛车', 'article_count': 0}, {'cid': 8, 'category_name': '旅游', 'article_count': 0}, {'cid': 9, 'category_name': '美食', 'article_count': 1}, {'cid': 10, 'category_name': '时尚', 'article_count': 0}]
2024-10-11 22:55:14,875 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,876 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /article/get_recent_articles HTTP/1.1" 200 -
2024-10-11 22:55:14,878 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,878 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /article/categories_with_count HTTP/1.1" 200 -
2024-10-11 22:55:14,971 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:14,972 - INFO - 执行查询: SELECT id, attachment_url, attachment_name, size FROM article_attachments WHERE aid=%s, 参数: (1473524313,)
2024-10-11 22:55:14,972 - INFO - 查询结果: [{'id': 20, 'attachment_url': 'http://localhost:8080/static/image\\cd508da3-f93d-4ebe-b356-8fb399f443e5.jpg', 'attachment_name': 'auth.jpg', 'size': 0}, {'id': 21, 'attachment_url': 'http://localhost:8080/static/image\\639ecf84-5afd-47ce-9e4c-beac763b8b5b.jpg', 'attachment_name': 'like.jpg', 'size': 0}]
2024-10-11 22:55:14,972 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:14,973 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:14] "GET /article/get_attachments/1473524313 HTTP/1.1" 200 -
2024-10-11 22:55:15,111 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:15,111 - INFO - 执行查询: SELECT username, phone, role, created_at, user_icon_url FROM users WHERE id = %s, 参数: (33,)
2024-10-11 22:55:15,112 - INFO - 查询结果: {'username': '吴子依小狗狗', 'phone': '18888888888', 'role': 'author', 'created_at': datetime.datetime(2024, 9, 29, 13, 16, 43), 'user_icon_url': 'http://localhost:8080/static/user_icons\\8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg'}
2024-10-11 22:55:15,112 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:15,112 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:15] "GET /user/user_info/33 HTTP/1.1" 200 -
2024-10-11 22:55:15,172 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:15,172 - INFO - 执行查询: SELECT COUNT(*) as count FROM comments WHERE article_id=%s, 参数: (1473524313,)
2024-10-11 22:55:15,172 - INFO - 查询结果: {'count': 0}
2024-10-11 22:55:15,172 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:15,173 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:15] "GET /comments/count/1473524313 HTTP/1.1" 200 -
2024-10-11 22:55:15,177 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:15,177 - INFO - 执行查询: SELECT c.*, u.user_icon_url, u.username ,u.role FROM comments c LEFT JOIN users u ON c.user_id=u.id WHERE article_id=%s ORDER BY c.like_count DESC, 参数: (1473524313,)
2024-10-11 22:55:15,177 - INFO - 查询结果: ()
2024-10-11 22:55:15,177 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:15,177 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:15] "GET /comments/1473524313 HTTP/1.1" 200 -
2024-10-11 22:55:15,441 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:15] "[36mGET /static/image/dcd80204-43f0-4256-971c-504cca08ec4b.jpg HTTP/1.1[0m" 304 -
2024-10-11 22:55:15,442 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:15] "[36mGET /static/image/c8e8ac5a-175e-43f8-8199-8360f07c7a04.jpg HTTP/1.1[0m" 304 -
2024-10-11 22:55:15,485 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:15] "[36mGET /static/user_icons/8ad9ba88-7295-44e9-9b73-f36b5852505e.jpg HTTP/1.1[0m" 304 -
2024-10-11 22:55:20,661 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:20,661 - INFO - 执行查询: SELECT * FROM yesapi_bjy_article WHERE aid=%s AND is_show=1 AND is_delete=0, 参数: (8504,)
2024-10-11 22:55:20,662 - INFO - 查询结果: {'id': 10, 'aid': 8504, 'title': '测试修改文章', 'author': '邹云', 'content': '测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章测试修改文章', 'keywords': '测试，修改，文章', 'description': '测试修改文章', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 110, 'addtime': 1726728030, 'cid': 1, 'image_url': 'http://localhost:8080/static/image\\ea49b748-be8e-4eb7-adc3-7753e3e83529.jpg', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 19, 53, 16), 'auth_id': 33}
2024-10-11 22:55:20,663 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:20,664 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:20] "GET /article/article_id/8504 HTTP/1.1" 200 -
2024-10-11 22:55:20,910 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:20,911 - INFO - 执行查询: SELECT id, attachment_url, attachment_name, size FROM article_attachments WHERE aid=%s, 参数: (8504,)
2024-10-11 22:55:20,911 - INFO - 查询结果: ()
2024-10-11 22:55:20,911 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:20,912 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:20] "GET /article/get_attachments/8504 HTTP/1.1" 200 -
2024-10-11 22:55:25,577 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:25,577 - INFO - 执行查询: SELECT * FROM yesapi_bjy_article WHERE aid=%s AND is_show=1 AND is_delete=0, 参数: (45,)
2024-10-11 22:55:25,578 - INFO - 查询结果: {'id': 18, 'aid': 45, 'title': '量子计算——未来科技的颠覆者', 'author': 'ChatGpt', 'content': '量子计算是近年来科学技术界最受关注的前沿领域之一，它被认为将彻底改变传统计算的方式，并对多个行业产生深远影响\n 不同于经典计算机依赖的比特（0和1），量子计算基于量子比特（qubit），它可以同时处于0和1的叠加态\n 这一特性使得量子计算能够在处理某些复杂问题时，比传统计算机快上千倍甚至亿倍\n 本文将探讨量子计算的基本原理、应用领域以及面临的挑战\n  \r     首先，量子计算的核心在于量子力学的两大基本原理：叠加和纠缠\n 叠加态意味着一个量子比特可以同时表示0和1，从而使得量子计算机能够同时处理大量的计算任务\n 相比之下，经典计算机在同一时间内只能处理一项任务\n 而纠缠态则使得两个或多个量子比特之间的状态紧密关联，即使它们相隔甚远，也能够瞬间相互影响\n 通过利用这些特性，量子计算机能够在解决复杂问题时显著提升运算效率\n  \r     量子计算的应用前景广阔，涵盖了多个领域\n 首先，在密码学领域，量子计算被认为能够打破当前的加密标准\n 传统的加密算法，如RSA，依赖于因数分解等数学难题的复杂性，而量子计算通过Shor算法能够在极短时间内完成因数分解，从而破解现有的加密系统\n 因此，未来量子计算的发展将促使人类寻找新的、更为安全的加密方式\n  \r     其次，量子计算在材料科学和药物研发中具有巨大潜力\n 模拟和预测分子结构是材料科学和化学领域中的重要任务，传统计算机由于运算能力的限制，难以对复杂分子进行精确的模拟\n 而量子计算可以通过模拟量子系统的行为，帮助科学家更快地找到新材料或新药物\n 例如，量子计算已经被用于模拟某些分子的电子结构，从而加速了新药的发现过程\n  \r     此外，量子计算在人工智能和机器学习中的应用前景也备受关注\n 传统的机器学习算法依赖于大量的数据和复杂的计算过程，而量子计算的高效运算能力将显著提高机器学习的训练速度\n 一些研究者已经开始探索量子计算与人工智能的结合，尝试开发量子神经网络等新型算法，期望在未来实现更为智能和高效的AI系统\n  \r     然而，量子计算的实际应用仍面临诸多挑战\n 首先是量子比特的稳定性问题\n 由于量子比特极易受到外界干扰，导致量子信息的丢失，这一问题被称为“量子退相干”\n 为了使量子计算机正常运行，科学家们正在研究如何延长量子比特的寿命，并开发有效的纠错机制\n 其次，量子计算的硬件制造和维护成本极高，目前全球仅有少数科研机构和科技公司能够研发原型机，距离大规模商用仍有较长的路要走\n  \r     尽管面临挑战，量子计算的潜力不可忽视\n 它有望在未来的几十年内颠覆多个行业，包括金融、物流、化学、能源等，为人类社会带来全新的科技革命\n 随着科学技术的不断进步，量子计算将逐渐从实验室走向现实应用，成为未来科技的重要组成部分\n ', 'keywords': '科技, 量子计算, 未来', 'description': '关于量子计算及其在未来科技中的潜力。', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 660, 'addtime': 1617181724, 'cid': 5, 'image_url': 'http://localhost:8080/static/picture/architect-2.png', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 21, 39, 37), 'auth_id': 33}
2024-10-11 22:55:25,578 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:25,579 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:25] "GET /article/article_id/45 HTTP/1.1" 200 -
2024-10-11 22:55:25,900 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:25,900 - INFO - 执行查询: SELECT id, attachment_url, attachment_name, size FROM article_attachments WHERE aid=%s, 参数: (45,)
2024-10-11 22:55:25,901 - INFO - 查询结果: ()
2024-10-11 22:55:25,902 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:25,903 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:25] "GET /article/get_attachments/45 HTTP/1.1" 200 -
2024-10-11 22:55:35,946 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:35,946 - INFO - 执行查询: SELECT * FROM yesapi_bjy_article WHERE aid=%s AND is_show=1 AND is_delete=0, 参数: (1473524313,)
2024-10-11 22:55:35,948 - INFO - 查询结果: {'id': 22, 'aid': 1473524313, 'title': '文章NM', 'author': '吴子依小狗狗', 'content': '<p>@article_blueprint.route(\'/add_article\', methods=[\'POST\'])<br>@token_required<br>def add_article(current_user_id):<br>&nbsp; &nbsp;"""<br>&nbsp; &nbsp;添加文章，包括文章内容、标签、描述、图片以及附件的处理。<br>&nbsp; &nbsp;"""<br>&nbsp; &nbsp;try:<br>&nbsp; &nbsp; &nbsp; &nbsp;# 根据用户ID查询用户信息<br>&nbsp; &nbsp; &nbsp; &nbsp;query_user = "SELECT username FROM users WHERE id = %s"<br>&nbsp; &nbsp; &nbsp; &nbsp;user_result = mysql_pool.fetch(query_user, (current_user_id,))</p><p>&nbsp; &nbsp; &nbsp; &nbsp;if not user_result:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": "用户不存在"}), 404</p><p>&nbsp; &nbsp; &nbsp; &nbsp;current_user_username = user_result[0][\'username\'] &nbsp;# 获取用户名</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 获取表单数据<br>&nbsp; &nbsp; &nbsp; &nbsp;title = request.form.get(\'title\')<br>&nbsp; &nbsp; &nbsp; &nbsp;keywords = request.form.get(\'keywords\')<br>&nbsp; &nbsp; &nbsp; &nbsp;description = request.form.get(\'description\')<br>&nbsp; &nbsp; &nbsp; &nbsp;content = request.form.get(\'content\')<br>&nbsp; &nbsp; &nbsp; &nbsp;category_id = request.form.get(\'category_id\') &nbsp;# 获取分类ID</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 验证必要字段是否存在<br>&nbsp; &nbsp; &nbsp; &nbsp;if not all([title, keywords, content]):<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": "缺少必要的字段"}), 400</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 生成一个长度不超过10的唯一aid<br>&nbsp; &nbsp; &nbsp; &nbsp;aid = generate_numeric_uuid()</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 保存文章封面图片<br>&nbsp; &nbsp; &nbsp; &nbsp;cover_image = request.files.get(\'coverImage\')<br>&nbsp; &nbsp; &nbsp; &nbsp;cover_image_url = None<br>&nbsp; &nbsp; &nbsp; &nbsp;if cover_image:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cover_image_path, error = save_file(cover_image, app.config[\'UPLOAD_FOLDER\'])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if error:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"封面图片上传失败: {error}"}), 400<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cover_image_url = f"http://localhost:8080/{cover_image_path}"</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 保存文章到数据库<br>&nbsp; &nbsp; &nbsp; &nbsp;insert_article_query = \'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INSERT INTO yesapi_bjy_article (aid, title, keywords, description, content, addtime, author, auth_id, cid, image_url)&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)<br>&nbsp; &nbsp; &nbsp; &nbsp;\'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp;addtime = int(time.time()) &nbsp;# 获取当前Unix时间戳<br>&nbsp; &nbsp; &nbsp; &nbsp;params = (aid, title, keywords, description, content, addtime, current_user_username, current_user_id, category_id, cover_image_url)<br>&nbsp; &nbsp; &nbsp; &nbsp;mysql_pool.execute(insert_article_query, params)</p><p>&nbsp; &nbsp; &nbsp; &nbsp;# 处理上传的附件文件<br>&nbsp; &nbsp; &nbsp; &nbsp;attachments = request.files.getlist(\'attachments[]\')<br>&nbsp; &nbsp; &nbsp; &nbsp;for attachment in attachments:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if attachment:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;attachment_path, error = save_file(attachment, app.config[\'UPLOAD_FOLDER\'])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if error:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"附件上传失败: {error}"}), 400</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 保存附件信息到数据库<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;insert_attachment_query = \'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;INSERT INTO article_attachments (aid, attachment_url, attachment_name, size)&nbsp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VALUES (%s, %s, %s, %s)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\'\'\'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;attachment_url = f"http://localhost:8080/{attachment_path}"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;params = (aid, attachment_url, attachment.filename, attachment.content_length)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mysql_pool.execute(insert_attachment_query, params)</p><p>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"result": "文章发布成功", "article_id": aid}), 200</p><p>&nbsp; &nbsp;except Exception as e:<br>&nbsp; &nbsp; &nbsp; &nbsp;print(f"发布文章失败，错误信息：{str(e)}")<br>&nbsp; &nbsp; &nbsp; &nbsp;return jsonify({"error": f"发布文章失败: {str(e)}"}), 500<br>&nbsp;</p>', 'keywords': '测试，修改，文章', 'description': '非常好', 'is_show': 1, 'is_delete': 0, 'is_top': 0, 'is_original': 1, 'click': 3, 'addtime': 1728658174, 'cid': 9, 'image_url': 'http://localhost:8080/static/image\\dcd80204-43f0-4256-971c-504cca08ec4b.jpg', 'comment_count': 0, 'update_time': datetime.datetime(2024, 10, 11, 22, 55, 14), 'auth_id': 33}
2024-10-11 22:55:35,948 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:35,949 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:35] "GET /article/article_id/1473524313 HTTP/1.1" 200 -
2024-10-11 22:55:36,308 - DEBUG - 成功获取数据库连接
2024-10-11 22:55:36,308 - INFO - 执行查询: SELECT id, attachment_url, attachment_name, size FROM article_attachments WHERE aid=%s, 参数: (1473524313,)
2024-10-11 22:55:36,309 - INFO - 查询结果: [{'id': 20, 'attachment_url': 'http://localhost:8080/static/image\\cd508da3-f93d-4ebe-b356-8fb399f443e5.jpg', 'attachment_name': 'auth.jpg', 'size': 0}, {'id': 21, 'attachment_url': 'http://localhost:8080/static/image\\639ecf84-5afd-47ce-9e4c-beac763b8b5b.jpg', 'attachment_name': 'like.jpg', 'size': 0}]
2024-10-11 22:55:36,309 - DEBUG - 数据库连接已关闭
2024-10-11 22:55:36,310 - INFO - 127.0.0.1 - - [11/Oct/2024 22:55:36] "GET /article/get_attachments/1473524313 HTTP/1.1" 200 -
